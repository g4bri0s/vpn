<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<body>
    <nav th:fragment="sidebar" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
        <div class="position-sticky pt-3">
            <!-- User Profile Card -->
            <div class="text-center mb-4 p-3 bg-white rounded-3 shadow-sm">
                <div class="mb-3">
                    <div class="avatar-circle mb-2">
                        <i class="bi bi-person fs-1 text-white"></i>
                    </div>
                    <h6 class="mb-1" sec:authentication="name">Nome do Usuário</h6>
                    <span class="badge bg-primary" sec:authentication="authorities">Cargo</span>
                </div>
                <a href="#" class="btn btn-sm btn-outline-primary w-100">
                    <i class="bi bi-pencil-square me-1"></i> Editar Perfil
                </a>
            </div>

            <!-- Main Navigation -->
            <ul class="nav flex-column mb-4">
                <li class="nav-item">
                    <a class="nav-link" th:classappend="${#httpServletRequest.getRequestURI() == '/dashboard' ? 'active' : ''}" 
                       th:href="@{/dashboard}">
                        <i class="bi bi-speedometer2 me-2"></i>
                        Dashboard
                        <span class="badge bg-primary rounded-pill ms-auto">3</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:classappend="${#httpServletRequest.getRequestURI().startsWith('/certificates') ? 'active' : ''}" 
                       th:href="@{/certificates}">
                        <i class="bi bi-file-earmark-lock me-2"></i>
                        Meus Certificados
                        <span class="badge bg-success rounded-pill ms-auto">5</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:classappend="${#httpServletRequest.getRequestURI().startsWith('/requests') ? 'active' : ''}" 
                       href="#">
                        <i class="bi bi-send me-2"></i>
                        Solicitações
                        <span class="badge bg-warning text-dark rounded-pill ms-auto">2</span>
                    </a>
                </li>
            </ul>

            <!-- Admin Section -->
            <div sec:authorize="hasRole('ADMIN')">
                <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-uppercase text-muted small">
                    <span>Administração</span>
                    <i class="bi bi-shield-lock"></i>
                </h6>
                <ul class="nav flex-column mb-4">
                    <li class="nav-item">
                        <a class="nav-link" th:classappend="${#httpServletRequest.getRequestURI().startsWith('/admin/users') ? 'active' : ''}" 
                           th:href="@{/admin/users}">
                            <i class="bi bi-people me-2"></i>
                            Gerenciar Usuários
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" th:classappend="${#httpServletRequest.getRequestURI().startsWith('/admin/certificates') ? 'active' : ''}" 
                           th:href="@{/admin/certificates}">
                            <i class="bi bi-key me-2"></i>
                            Gerenciar Certificados
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="bi bi-gear me-2"></i>
                            Configurações
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Reports Section -->
            <div>
                <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-uppercase text-muted small">
                    <span>Relatórios</span>
                    <i class="bi bi-graph-up"></i>
                </h6>
                <ul class="nav flex-column mb-2">
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="bi bi-graph-up me-2"></i>
                            Uso da Rede
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="bi bi-clock-history me-2"></i>
                            Histórico de Acesso
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="bi bi-shield-check me-2"></i>
                            Auditoria de Segurança
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Help Section -->
            <div class="mt-auto pt-3 border-top">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="bi bi-question-circle me-2"></i>
                            Ajuda
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">
                            <i class="bi bi-info-circle me-2"></i>
                            Sobre
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <style>
        .sidebar {
            background-color: #f8f9fa;
            min-height: calc(100vh - 56px);
            box-shadow: 1px 0 3px rgba(0, 0, 0, 0.1);
        }
        
        .sidebar .nav-link {
            color: #333;
            border-radius: 0.25rem;
            margin: 0.2rem 0.5rem;
            padding: 0.5rem 1rem;
            display: flex;
            align-items: center;
            transition: all 0.2s;
        }
        
        .sidebar .nav-link:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }
        
        .sidebar .nav-link.active {
            background-color: #2D3277;
            color: white;
            font-weight: 500;
        }
        
        .sidebar .nav-link i {
            width: 20px;
            text-align: center;
            margin-right: 10px;
        }
        
        .sidebar-heading {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 0.5rem 1rem;
        }
        
        .avatar-circle {
            width: 70px;
            height: 70px;
            background-color: #2D3277;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
        }
    </style>
</body>
</html>
